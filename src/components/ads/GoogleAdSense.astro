---
/**
 * GoogleAdSense.astro
 *
 * Google AdSense 스크립트 컴포넌트
 *
 * 사용법:
 * 1. AdSense에서 Publisher ID를 받습니다 (ca-pub-XXXXXXXXXXXXXXXX 형식)
 * 2. 환경 변수 PUBLIC_ADSENSE_PUBLISHER_ID에 ID를 설정합니다
 * 3. BaseLayout.astro의 <head>에 이 컴포넌트를 추가합니다
 *
 * 환경 변수 설정:
 * - 로컬: .env 파일에 PUBLIC_ADSENSE_PUBLISHER_ID=ca-pub-XXXXXXXXXXXXXXXX 추가
 * - Cloudflare Pages: 대시보드 > Settings > Environment variables에서 설정
 */

// 환경 변수에서 AdSense Publisher ID 가져오기
const ADSENSE_PUBLISHER_ID = import.meta.env.PUBLIC_ADSENSE_PUBLISHER_ID;

// 프로덕션 환경에서만 활성화
const isProduction = import.meta.env.PROD;

// 유효한 Publisher ID 확인
const isValidPublisherId = ADSENSE_PUBLISHER_ID && ADSENSE_PUBLISHER_ID.startsWith('ca-pub-');
---

{isProduction && isValidPublisherId && (
  <script
    is:inline
    async
    src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${ADSENSE_PUBLISHER_ID}`}
    crossorigin="anonymous"
  />
)}

{/* 개발 환경에서는 콘솔 로그로 대체 */}
{!isProduction && (
  <script is:inline>
    console.log('[AdSense] Google AdSense is disabled in development mode');
  </script>
)}
